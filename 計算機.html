<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>多機能電卓（方程式対応）</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 2em;
    }
    .calculator, .linear, .quadratic {
      display: none;
      margin-top: 1em;
    }
    .display, input {
      font-size: 1.2em;
      padding: 0.5em;
      margin: 0.5em;
    }
    .buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      max-width: 300px;
      margin: auto;
    }
    button {
      padding: 15px;
      font-size: 1.1em;
      cursor: pointer;
    }
    select {
      font-size: 1.2em;
      padding: 0.5em;
      margin-bottom: 1em;
    }
    h2 {
      margin-top: 1em;
    }
    .linear, .quadratic {
      display: none;
    }
    .linear input, .quadratic input {
      width: 80px;
      margin: 0.5em;
    }
    .linear button, .quadratic button {
      width: 100px;
      padding: 0.5em;
      font-size: 1.1em;
    }
    .keisan{
        background-color: orange;
        border-radius: 100px;
    }
    .buttons{
        borde-radius: 100px;
        background-color: #f0f0f0;
        padding: 10px;
    }
    .delate {
      background-color: gray;
      color: white;
    }
    .header {
  display: flex;
  justify-content: center; /* 水平中央 */
  align-items: center;     /* 垂直中央 */
  gap: 1em;
  margin: 1em 0;
}

.header h1 {
  margin: 0;
}

.back-button {
  font-size: 1em;
  text-decoration: none;
  color: #007bff;
  background-color: #e7f0ff;
  padding: 0.4em 0.8em;
  border-radius: 5px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
  transition: background-color 0.3s;
}

.back-button:hover {
  background-color: #d0e7ff;
}

    </style>
</head>
<body>

  <h1>多機能電卓</h1>
  <div class="header">
  <a href="javascript:history.back()" class="back-button">← Homeに戻る</a>
</div>


  <label for="mode">モード切り替え：</label>
  <select id="mode" onchange="switchMode()">
    <option value="calc">計算モード</option>
    <option value="linear">一次方程式モード</option>
    <option value="quadratic">二次方程式モード</option>
  </select>

  <!-- 通常の計算機 -->
  <div class="calculator" id="calcMode">
    <input type="text" id="display" class="display" disabled>
    <div class="buttons">
      <button onclick="append('7')">7</button>
      <button onclick="append('8')">8</button>
      <button onclick="append('9')">9</button>
      <button onclick="append('/')" class="keisan">÷</button>

      <button onclick="append('4')">4</button>
      <button onclick="append('5')">5</button>
      <button onclick="append('6')">6</button>
      <button onclick="append('*')" class="keisan">×</button>

      <button onclick="append('1')">1</button>
      <button onclick="append('2')">2</button>
      <button onclick="append('3')">3</button>
      <button onclick="append('-')" class="keisan">−</button>

      <button onclick="append('0')">0</button>
      <button onclick="append('.')">.</button>
      <button onclick="calculate()">=</button>
      <button onclick="append('+')" class="keisan">＋</button>

      <button onclick="clearDisplay()" class="delate">C</button>
      <button onclick="backspace()" class="delate">←</button>
      <button onclick="append('**')">^</button>
      <button onclick="applyFunc('sqrt')">√</button>
    
      <button onclick="append('1/2')">½</button>
      <button onclick="applyFunc('sin')">sin</button>
      <button onclick="applyFunc('cos')">cos</button>
      <button onclick="applyFunc('tan')">tan</button>
    </div>
  </div>

  <!-- 一次方程式 -->
  <div class="linear" id="linearMode">
    <h2>一次方程式 ax + b = 0</h2>
    <input type="number" id="a1" placeholder="a">
    <input type="number" id="b1" placeholder="b">
    <button onclick="solveLinear()">解く</button>
    <p id="linearResult">解: </p>
  </div>

  <!-- 二次方程式 -->
  <div class="quadratic" id="quadraticMode">
    <h2>二次方程式 ax² + bx + c = 0</h2>
    <input type="number" id="a2" placeholder="a">
    <input type="number" id="b2" placeholder="b">
    <input type="number" id="c2" placeholder="c">
    <button onclick="solveQuadratic()">解く</button>
    <p id="quadraticResult">解: </p>
  </div>

  <script>
    const display = document.getElementById('display');

    function switchMode() {
      const mode = document.getElementById('mode').value;
      document.getElementById('calcMode').style.display = (mode === 'calc') ? 'block' : 'none';
      document.getElementById('linearMode').style.display = (mode === 'linear') ? 'block' : 'none';
      document.getElementById('quadraticMode').style.display = (mode === 'quadratic') ? 'block' : 'none';
    }

    // 初期表示
    switchMode();

    function append(value) {
      display.value += value;
    }

    function clearDisplay() {
      display.value = '';
    }

    function calculate() {
      try {
        display.value = eval(display.value);
      } catch {
        display.value = 'エラー';
      }
    }

    function applyFunc(func) {
      try {
        const value = eval(display.value);
        const rad = value * (Math.PI / 180);
        let result;
        switch (func) {
          case 'sin': result = Math.sin(rad); break;
          case 'cos': result = Math.cos(rad); break;
          case 'tan': result = Math.tan(rad); break;
          case 'sqrt': result = Math.sqrt(value); break;
        }
        display.value = result;
      } catch {
        display.value = 'エラー';
      }
    }

    function solveLinear() {
      const a = parseFloat(document.getElementById('a1').value);
      const b = parseFloat(document.getElementById('b1').value);
      let result = '';

      if (a === 0) {
        result = b === 0 ? '無限に解があります' : '解なし';
      } else {
        result = -b / a;
      }

      document.getElementById('linearResult').textContent = `解: x = ${result}`;
    }

    function solveQuadratic() {
      const a = parseFloat(document.getElementById('a2').value);
      const b = parseFloat(document.getElementById('b2').value);
      const c = parseFloat(document.getElementById('c2').value);
      let result = '';

      if (a === 0) {
        result = 'a ≠ 0 を入力してください';
      } else {
        const d = b * b - 4 * a * c;
        if (d > 0) {
          const x1 = (-b + Math.sqrt(d)) / (2 * a);
          const x2 = (-b - Math.sqrt(d)) / (2 * a);
          result = `x₁ = ${x1}, x₂ = ${x2}`;
        } else if (d === 0) {
          const x = -b / (2 * a);
          result = `重解 x = ${x}`;
        } else {
          result = '実数解なし';
        }
      }
      function backspace(){
        display.value = display.value.slice(0, -1);
      }

      document.getElementById('quadraticResult').textContent = `解: ${result}`;
    }
  </script>
</body>
</html>